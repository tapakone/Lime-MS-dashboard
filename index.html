<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>LIMES MS — Dashboard</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1"></script>
</head>
<body>
  <div class="bg"></div>

  <header class="topbar">
    <div class="brand">
      <div class="logo-wrap">
        <img id="assetLogo" class="logo" alt="logo" src="assets/lemon.svg"/>
      </div>
      <div class="brand-text">
        <div class="brand-title">LIMES MS</div>
        <div class="brand-sub" id="brandSub">Gold Spot Monitor — XAUUSD</div>
      </div>
    </div>

    <div class="controls card">
      <div class="control-row">
        <label for="assetInput" class="label">Asset</label>
        <div class="input-wrap">
          <input id="assetInput" list="assetList" class="input" placeholder="Type: XAUUSD, NVDA, SCHD..." autocomplete="off" />
          <datalist id="assetList"></datalist>
        </div>
        <button id="reloadBtn" class="btn">Reload</button>
      </div>
      <div class="meta" id="metaLine">—</div>
    </div>
  </header>

  <main class="grid">
    <section class="card chart-card">
      <div class="chart-head">
        <div>
          <div class="h1" id="assetTitle">XAUUSD</div>
          <div class="h2" id="assetSubtitle">Daily Close | Forecast vs Actual (+1D)</div>
        </div>
        <div class="pills">
          <span class="pill" id="pillWindows">D + 2hr + 1hr</span>
          <span class="pill" id="pillClock">--:-- (TH)</span>
        <span class="pill" id="pillRefresh">Refresh 5m</span>
        </div>
      </div>

      <div class="legend">
        <span class="dot dot-price"></span><span>Price</span>
        <span class="dot dot-mid"></span><span>Phase / Mid (MA3)</span>
        <span class="dot dot-band"></span><span>Upper / Lower (±2σ)</span>
        <span class="dot dot-today"></span><span>Today (0)</span>
      </div>

      <div class="canvas-wrap">
        <canvas id="chart"></canvas>
      </div>

      <div class="chart-foot" id="sourceLine">Source: — · Data update: —</div>
    </section>

    <aside class="card state-card">
      <div class="state-head">
        <div class="state-title">STATE</div>
        <div class="badge" id="stateBadge">—</div>
      </div>

      <div class="kv">
        <div class="k">Day 0 ref (04:00 TH)</div><div class="v" id="refDay0">—</div>
        <div class="k">Latest (15m/30m)</div><div class="v" id="latest">—</div>
        <div class="k">Forecast (+1D)</div><div class="v" id="forecast">—</div>
        <div class="k">Slope</div><div class="v" id="slope">—</div>
        <div class="k">Risk score</div><div class="v" id="riskScore">—</div>
      </div>

      <div class="riskbar">
        <div class="riskbar-fill" id="riskFill"></div>
      </div>

      <div class="advice">
        <div class="advice-head">
          <div class="advice-title">ADVICE</div>
          <div class="zbox" id="zBox">z=—</div>
        </div>
        <div class="advice-main" id="adviceMain">—</div>
        <div class="advice-sub" id="adviceSub">—</div>
      </div>

      <div class="monitor">
        <div class="monitor-title">MONITOR (1h → 2h → D)</div>
        <div class="monitor-grid" id="monitorGrid"></div>
      </div>
    </aside>
  </main>

  <!-- Floating mini summary (follows scroll) -->
  <div class="float-card" id="floatCard" role="button" tabindex="0" aria-label="Open summary">
    <div class="float-left">
      <div class="float-badge" id="floatBadge">—</div>
    </div>
    <div class="float-mid">
      <div class="float-asset" id="floatAsset">—</div>
      <div class="float-risk" id="floatRisk">Risk: —</div>
    </div>
    <div class="float-time" id="floatTime">--:--</div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-title" id="modalTitle">สรุป</div>
      <div class="modal-body" id="modalBody">—</div>
      <button class="btn" id="modalClose">ตกลง</button>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
